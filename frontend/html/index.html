<!doctype html>
<html>

<head>
    <title>Sachbearbeiter</title>

    <meta charset="UTF-8"/>

    <!-- UIkit CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.21/css/uikit.min.css" />

    <!-- UIkit JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.21/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.21/js/uikit-icons.min.js"></script>

    <!-- Neovis.js -->
    <script src="https://cdn.neo4jlabs.com/neovis.js/v1.0.0/neovis.js"></script>
    <script src="https://rawgit.com/neo4j-contrib/neovis.js/master/dist/neovis.js"></script>

    <script type="text/javascript" src="../public/javascript/bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" href="styles/index.css" />

    <style>
    html {
        height: 100%;
    }
    body {
        height: 100%;
        display: flex;
    }

    #viz {
        flex-grow: 1;
    }
    </style>
</head>

<body onload="draw()">
    <!--<nav class="uk-navbar-container" uk-navbar>
        <div class="uk-navbar-left">
            <ul class="uk-navbar-nav">
                <li class="uk-active"><a href="#">Active</a></li>
                <li>
                    <a href="#">Parent</a>
                    <div class="uk-navbar-dropdown">
                        <ul class="uk-nav uk-navbar-dropdown-nav">
                            <li class="uk-active"><a href="#">Active</a></li>
                            <li><a href="#">Item</a></li>
                            <li><a href="#">Item</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="#">Item</a></li>
            </ul>

        </div>
    </nav>-->
     <div id="viz"></div>

     <script type="text/javascript">
        const neo4jURI = "bolt://127.0.0.1:7687";
        const neo4jUSER = "neo4j";
        const neo4jPASS = "root";

        var viz;
        var suspiciousCustomers = [];

        /* EXPORT:
        async function findSuspiciousCustomers() {
            const neo4j = require('neo4j-driver').v1;
            const driver = neo4j.driver(neo4jURI, neo4j.auth.basic(neo4jUSER, neo4jPASS));
            const session = driver.session();

            // Test noch ausstehend
            suspiciousCustomers = await session.run(`
                match(c:Customer)
                with collect(c) as customers
                call apoc.algo.betweenness(['TRANSACTION'], customers, 'BOTH')
                yield node, score
                return node, score
                order by score desc
            `);

            console.log("hi2");
        }
        */

        function draw() {
            var config = {
                container_id: "viz",
                //server_url: "bolt://35.205.193.55:7687",
                server_url: "bolt://127.0.0.1:7687",
                server_user: "neo4j",
                //server_password: "hcvC2ov9ExBt",
                server_password: "hansi",
                labels: {
                    "Character": {
                        "caption": "name",
                        "size": "pagerank",
                        "community": "community"
                    }
                },
                relationships: {
                    "INTERACTS": {
                        "thickness": "weight",
                        "caption": false
                    }
                },
                initial_cypher: "MATCH (n) RETURN (n) limit 25;"
            };

            //findSuspiciousCustomers();

            viz = new NeoVis.default(config);
            viz.render();
        }
     </script>
 </body>

</html>
